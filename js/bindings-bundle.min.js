Object.observe||function(a,b,c){"use strict";var d,e,f=["add","update","delete","reconfigure","setPrototype","preventExtensions"],g=b.isArray||function(a){return function(b){return"[object Array]"===a.call(b)}}(a.prototype.toString),h=b.prototype.indexOf?b.indexOf||function(a,c,d){return b.prototype.indexOf.call(a,c,d)}:function(a,b,c){for(var d=c||0;d<a.length;d++)if(a[d]===b)return d;return-1},i="undefined"!=typeof c.Map&&Map.prototype.forEach?function(){return new Map}:function(){var a=[],b=[];return{size:0,has:function(b){return h(a,b)>-1},get:function(c){return b[h(a,c)]},set:function(c,d){var e=h(a,c);-1===e?(a.push(c),b.push(d),this.size++):b[e]=d},"delete":function(c){var d=h(a,c);d>-1&&(a.splice(d,1),b.splice(d,1),this.size--)},forEach:function(c){for(var d=0;d<a.length;d++)c.call(arguments[1],b[d],a[d],this)}}},j=a.getOwnPropertyNames?function(){var b=a.getOwnPropertyNames;try{arguments.callee}catch(c){var d=(b(h).join(" ")+" ").replace(/prototype |length |name /g,"").slice(0,-1).split(" ");d.length&&(b=function(b){var c=a.getOwnPropertyNames(b);if("function"==typeof b)for(var e,f=0;f<d.length;)(e=h(c,d[f++]))>-1&&c.splice(e,1);return c})}return b}():function(b){var c,d,e=[];if("hasOwnProperty"in b)for(c in b)b.hasOwnProperty(c)&&e.push(c);else{d=a.hasOwnProperty;for(c in b)d.call(b,c)&&e.push(c)}return g(b)&&e.push("length"),e},k=a.getPrototypeOf,l=a.defineProperties&&a.getOwnPropertyDescriptor,m=c.requestAnimationFrame||c.webkitRequestAnimationFrame||function(){var a=+new Date,b=a;return function(c){return setTimeout(function(){c((b=+new Date)-a)},17)}}(),n=function(a,b,c){var e=d.get(a);e?t(a,e,b,c):(e=o(a),t(a,e,b,c),1===d.size&&m(q))},o=function(b,c){var e,f=j(b),g=[],h=0,c={handlers:i(),frozen:a.isFrozen?a.isFrozen(b):!1,extensible:a.isExtensible?a.isExtensible(b):!0,proto:k&&k(b),properties:f,values:g,notifier:s(b,c)};if(l)for(e=c.descriptors=[];h<f.length;)e[h]=l(b,f[h]),g[h]=b[f[h++]];else for(;h<f.length;)g[h]=b[f[h++]];return d.set(b,c),c},p=function(){var b=l?function(a,b,c,d,e){var f=b.properties[c],g=a[f],h=b.values[c],i=b.descriptors[c];"value"in e&&(h===g?0===h&&1/h!==1/g:h===h||g===g)&&(u(a,b,{name:f,type:"update",object:a,oldValue:h},d),b.values[c]=g),!i.configurable||e.configurable&&e.writable===i.writable&&e.enumerable===i.enumerable&&e.get===i.get&&e.set===i.set||(u(a,b,{name:f,type:"reconfigure",object:a,oldValue:h},d),b.descriptors[c]=e)}:function(a,b,c,d){var e=b.properties[c],f=a[e],g=b.values[c];(g===f?0===g&&1/g!==1/f:g===g||f===f)&&(u(a,b,{name:e,type:"update",object:a,oldValue:g},d),b.values[c]=f)},c=l?function(a,c,d,e,f){for(var g,h=c.length;d&&h--;)null!==c[h]&&(g=l(a,c[h]),d--,g?b(a,e,h,f,g):(u(a,e,{name:c[h],type:"delete",object:a,oldValue:e.values[h]},f),e.properties.splice(h,1),e.values.splice(h,1),e.descriptors.splice(h,1)))}:function(a,b,c,d,e){for(var f=b.length;c&&f--;)null!==b[f]&&(u(a,d,{name:b[f],type:"delete",object:a,oldValue:d.values[f]},e),d.properties.splice(f,1),d.values.splice(f,1),c--)};return function(d,e,f){if(d.handlers.size&&!d.frozen){var g,i,m,n,o,p,q,r,s=d.values,t=d.descriptors,v=0;if(d.extensible)if(g=d.properties.slice(),i=g.length,m=j(e),t){for(;v<m.length;)o=m[v++],n=h(g,o),r=l(e,o),-1===n?(u(e,d,{name:o,type:"add",object:e},f),d.properties.push(o),s.push(e[o]),t.push(r)):(g[n]=null,i--,b(e,d,n,f,r));c(e,g,i,d,f),a.isExtensible(e)||(d.extensible=!1,u(e,d,{type:"preventExtensions",object:e},f),d.frozen=a.isFrozen(e))}else{for(;v<m.length;)o=m[v++],n=h(g,o),p=e[o],-1===n?(u(e,d,{name:o,type:"add",object:e},f),d.properties.push(o),s.push(p)):(g[n]=null,i--,b(e,d,n,f));c(e,g,i,d,f)}else if(!d.frozen){for(;v<g.length;v++)o=g[v],b(e,d,v,f,l(e,o));a.isFrozen(e)&&(d.frozen=!0)}k&&(q=k(e),q!==d.proto&&(u(e,d,{type:"setPrototype",name:"__proto__",object:e,oldValue:d.proto}),d.proto=q))}}}(),q=function(){d.size&&(d.forEach(p),e.forEach(r),m(q))},r=function(a,b){a.changeRecords.length&&(b(a.changeRecords),a.changeRecords=[])},s=function(a,b){return arguments.length<2&&(b=d.get(a)),b&&b.notifier||{notify:function(b){b.type;var c=d.get(a);if(c){var e,f={object:a};for(e in b)"object"!==e&&(f[e]=b[e]);u(a,c,f)}},performChange:function(b,c){if("string"!=typeof b)throw new TypeError("Invalid non-string changeType");if("function"!=typeof c)throw new TypeError("Cannot perform non-function");var e,f,g=d.get(a),h=c.call(arguments[2]);if(g&&p(g,a,b),g&&h&&"object"==typeof h){f={object:a,type:b};for(e in h)"object"!==e&&"type"!==e&&(f[e]=h[e]);u(a,g,f)}}}},t=function(a,b,c,d){var f=e.get(c);f||e.set(c,f={observed:i(),changeRecords:[]}),f.observed.set(a,{acceptList:d.slice(),data:b}),b.handlers.set(c,f)},u=function(a,b,c,d){b.handlers.forEach(function(b){var e=b.observed.get(a).acceptList;("string"!=typeof d||-1===h(e,d))&&h(e,c.type)>-1&&b.changeRecords.push(c)})};d=i(),e=i(),a.observe=function(b,c,d){if(!b||"object"!=typeof b&&"function"!=typeof b)throw new TypeError("Object.observe cannot observe non-object");if("function"!=typeof c)throw new TypeError("Object.observe cannot deliver to non-function");if(a.isFrozen&&a.isFrozen(c))throw new TypeError("Object.observe cannot deliver to a frozen function object");if(arguments.length>2){if(!d||"object"!=typeof d)throw new TypeError("Object.observe cannot use non-object accept list")}else d=f;return n(b,c,d),b},a.unobserve=function(a,b){if(null===a||"object"!=typeof a&&"function"!=typeof a)throw new TypeError("Object.unobserve cannot unobserve non-object");if("function"!=typeof b)throw new TypeError("Object.unobserve cannot deliver to non-function");var c,f=e.get(b);return f&&(c=f.observed.get(a))&&(f.observed.forEach(function(a,b){p(a.data,b)}),m(function(){r(f,b)}),1===f.observed.size&&f.observed.has(a)?e["delete"](b):f.observed["delete"](a),1===c.data.handlers.size?d["delete"](a):c.data.handlers["delete"](b)),a},a.getNotifier=function(b){if(null===b||"object"!=typeof b&&"function"!=typeof b)throw new TypeError("Object.getNotifier cannot getNotifier non-object");return a.isFrozen&&a.isFrozen(b)?null:s(b)},a.deliverChangeRecords=function(a){if("function"!=typeof a)throw new TypeError("Object.deliverChangeRecords cannot deliver to non-function");var b=e.get(a);b&&(b.observed.forEach(function(a,b){p(a.data,b)}),r(b,a))}}(Object,Array,this);var EventEmiter=function(){function a(){this.events={}}return a.prototype.on=function(a,b,c){void 0===c&&(c=void 0),this.events[a]||(this.events[a]=[]),c&&(b=b.bind(c)),this.events[a].push(b)},a.prototype.off=function(a,b){this.events[a]||(this.events[a]=[]),-1!==this.events[a].indexOf(b)&&this.events[a].splice(this.events[a].indexOf(b),1)},a.prototype.once=function(a,b,c){void 0===c&&(c=void 0),this.on(a,function(a,c){b&&b(),this.off(a,c)}.bind(this),c)},a.prototype.emit=function(a,b){void 0===b&&(b=void 0),this.events[a]||(this.events[a]=[]);for(var c=0;c<this.events[a].length;c++)this.events[a][c](b)},a}(),bindings;!function(a){var b=function(){function b(b,c,d){void 0===c&&(c={}),void 0===d&&(d=document.body),this.object=b,this.node=d,this.bindings=[],this.options={prefix:"bind",inlineDelimiters:["{","}"],excludedElements:{script:!0,link:!0,meta:!0,style:!0}},this.scope=new a.Scope("",b,this);for(var e in c)this.options[e]=c[e]}return b.prototype.applyBindings=function(a){void 0===a&&(a=void 0),this.node.removeEventListener("DOMNodeInserted",this.ElementChange.bind(this)),this.node.removeEventListener("DOMNodeRemoved",this.ElementChange.bind(this)),a&&(this.node=a),this.bindings=this.buildBindings(),this.node.addEventListener("DOMNodeInserted",this.ElementChange.bind(this)),this.node.addEventListener("DOMNodeRemoved",this.ElementChange.bind(this))},b.prototype.buildBindings=function(b,c){void 0===b&&(b=this.node),void 0===c&&(c=b.__scope__||this.scope);var d=[];if(!(b.nodeName.toLowerCase()in this.options.excludedElements)){if(b.__bindings__){for(var e=0;e<b.__bindings__.length;e++)b.__bindings__[e].unbind();b.__bindings__=[]}b.__scope__=b.__scope__||c,b.parentNode&&(b.__addedScope__=a.extendNew(b.parentNode.__addedScope__||{},b.__addedScope__||{})),d=d.concat(this.createBindings(b));for(var e=0;e<b.childNodes.length;e++){var f=b.childNodes[e];f.nodeName.toLowerCase()in this.options.excludedElements||(d=d.concat(this.buildBindings(f,f.__scope__||c)))}return d}},b.prototype.createBindings=function(a){var b=[];switch(a.nodeType){case a.ELEMENT_NODE:b=this.createAttrBindings(a);break;case a.TEXT_NODE:b=this.createInlineBindings(a)}return b},b.prototype.createAttrBindings=function(a){for(var b=[],c=a.attributes,d=[],e=0;e<c.length;e++){var f=c.item(e),g=f.name.split("-");if(g[0]==this.options.prefix){g.splice(0,1);var h=bindingTypes.getBinding(g[0]);h?d.push({types:g,attr:f,constructor:h}):console.error("cant find binding: "+f.name)}}d.sort(function(a,b){return a.constructor.priority<b.constructor.priority?1:a.constructor.priority>b.constructor.priority?-1:0});for(var e=0;e<d.length;e++){var i=d[e];try{b.push(bindingTypes.createBinding(i.types,a,i.attr.value))}catch(j){console.error("failed to create binding: "+i.attr.name),console.error(j)}}return a.__bindings__=b,b},b.prototype.createInlineBindings=function(b){var c=[],d=this.parseInlineBindings(b.nodeValue,this.options.inlineDelimiters);if(1!==d.length||"text"!==d[0].type){for(var e=0;e<d.length;e++){var f=d[e],g=document.createTextNode(f.value);if(g.__bindings__=[],g.__scope__=b.__scope__,g.__addedScope__=a.clone(b.__addedScope__),b.parentNode.insertBefore(g,b),"binding"===f.type){var h=new a.InlineBinding(g);g.__bindings__=[h],c.push(h)}}b.parentNode.removeChild(b)}return c},b.prototype.parseInlineBindings=function(a,b){for(var e,g,i,c=0,d=0,f=a.length,h=[];f>d;){if(c=a.indexOf(b[0],d),0>c){h.push({type:"text",value:a.slice(d)});break}if(c>0&&c>d&&h.push({type:"text",value:a.slice(d,c)}),d=c+b[0].length,c=a.indexOf(b[1],d),0>c){g=a.slice(d-b[1].length),e=h[h.length-1],"text"===(null!=e?e.type:void 0)?e.value+=g:h.push({type:"text",value:g});break}i=a.slice(d,c).trim(),h.push({type:"binding",value:i}),d=c+b[1].length}return h},b.prototype.ElementChange=function(a){a.stopPropagation();var b=a.target;3!==b.nodeType&&this.buildBindings(b)},b}();a.Modal=b}(bindings||(bindings={}));var __extends=this.__extends||function(a,b){function d(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);d.prototype=b.prototype,a.prototype=new d},bindings;!function(a){var b=function(b){function c(a,c,d,e){void 0===e&&(e=void 0),b.call(this),this.key=a,this.object=c,this.modal=d,this.parent=e,this.values=c instanceof Array?[]:{},this.setKeys(this.object),Object.observe(this.object,this.objectChange.bind(this))}return __extends(c,b),c.prototype.getKey=function(a){for(var b in this.values)if(this.values[b].value==a)return b},c.prototype.setKey=function(b,c,d){void 0===d&&(d=!1),void 0==this.values[b]&&(this.values[b]="object"==typeof c?new a.Scope(b,c,this.modal,this):new a.Value(b,c,this)),this.values[b]instanceof a.Value?this.values[b].setValue(c):this.values[b]instanceof a.Scope&&this.values[b].setKeys(c),d||this.update()},c.prototype.setKeys=function(a,b){void 0===b&&(b=!1);for(var c in a)this.setKey(c,a[c],!0);b||this.update()},c.prototype.removeKey=function(a,b){void 0===b&&(b=!1),delete this.values[a],b||this.emit("change",this)},c.prototype.updateKey=function(a,b){this.object[a]=b},c.prototype.updateKeys=function(a){for(var b in a)this.updateKey(b,a[b])},c.prototype.update=function(){this.emit("change",this.object)},c.prototype.objectChange=function(a){for(var b=0;b<a.length;b++)if("_bindings"!=a[b].name)switch(a[b].type){case"add":this.setKey(a[b].name,a[b].object[a[b].name],!0),this.update();break;case"update":this.setKey(a[b].name,a[b].object[a[b].name],!0);break;case"delete":this.removeKey(a[b].name,!0),this.update()}},c.prototype.emit=function(c,d,e){switch(void 0===d&&(d=void 0),void 0===e&&(e=""),b.prototype.emit.call(this,c,d),e){case"down":for(var f in this.values)this.values[f]instanceof a.Scope?this.values[f].emit(c,d,e):this.values[f].emit(c,d);break;case"up":this.parent&&this.parent.emit(c,d,e)}},c}(EventEmiter);a.Scope=b}(bindings||(bindings={}));var bindings;!function(a){var b=function(a){function b(b,c,d){a.call(this),this.key="",this.key=b,this.value=c,this.parent=d}return __extends(b,a),b.prototype.setValue=function(a){return this.value=a,this.update(),this.value},b.prototype.updateValue=function(a){this.parent.updateKey(this.key,a)},b.prototype.update=function(){this.emit("change",this.value)},b}(EventEmiter);a.Value=b}(bindings||(bindings={}));var bindings;!function(a){var b=function(){function a(){}return Object.defineProperty(a.prototype,"scope",{get:function(){return this.node.__scope__},enumerable:!0,configurable:!0}),a.prototype.run=function(){},a.prototype.unbind=function(){},a.id="",a.priority=0,a}();a.Binding=b;var c=function(b){function c(c,d){b.call(this),this.node=c,this.dependencies=[],this.updateDependenciesOnChange=!1,this.expression=new a.Expression(c,d,this.scope),this.updateDependencies()}return __extends(c,b),c.prototype.dependencyChange=function(){this.updateDependenciesOnChange&&this.updateDependencies(),this.run()},c.prototype.run=function(){b.prototype.run.call(this),this.expression.run(),0!=this.dependencies.length||this.expression.success||(this.dependencies.push(this.scope),this.bindDependencies(),this.updateDependenciesOnChange=!0)},c.prototype.unbind=function(){this.unbindDependencies()},c.prototype.getDependencies=function(a){return void 0===a&&(a=!1),(a||void 0==this.dependencies)&&(this.dependencies=this.expression.getDependencies().requires),this.dependencies},c.prototype.updateDependencies=function(){this.unbindDependencies(),this.getDependencies(!0),this.bindDependencies()},c.prototype.bindDependencies=function(){for(var a=0;a<this.dependencies.length;a++)this.dependencies[a].on("change",this.dependencyChange.bind(this))},c.prototype.unbindDependencies=function(){for(var a=0;a<this.dependencies.length;a++)this.dependencies[a].off("change",this.dependencyChange.bind(this))},c}(a.Binding);a.OneWayBinding=c;var d=function(a){function b(b,c){a.call(this,b,c),this.domEvents=[],this.dontUpdate=!1,this.bindEvents()}return __extends(b,a),b.prototype.change=function(){this.dontUpdate=!0},b.prototype.dependencyChange=function(){this.dontUpdate||a.prototype.dependencyChange.call(this),this.dontUpdate=!1},b.prototype.unbind=function(){a.prototype.unbind.call(this),this.unbindEvents()},b.prototype.updateEvents=function(){this.unbindEvents(),this.bindEvents()},b.prototype.bindEvents=function(){for(var a=0;a<this.domEvents.length;a++)this.node.addEventListener(this.domEvents[a],this.change.bind(this))},b.prototype.unbindEvents=function(){for(var a=0;a<this.domEvents.length;a++)this.node.removeEventListener(this.domEvents[a],this.change.bind(this))},b}(a.OneWayBinding);a.TwoWayBinding=d;var e=function(b){function c(c,d){b.call(this),this.node=c,this.domEvents=[],this.expression=new a.Expression(c,d,this.scope),this.bindEvents()}return __extends(c,b),c.prototype.change=function(){this.expression.run()},c.prototype.unbind=function(){b.prototype.unbind.call(this),this.unbindEvents()},c.prototype.updateEvents=function(){this.unbindEvents(),this.bindEvents()},c.prototype.bindEvents=function(){for(var a=0;a<this.domEvents.length;a++)this.node.addEventListener(this.domEvents[a],this.change.bind(this))},c.prototype.unbindEvents=function(){for(var a=0;a<this.domEvents.length;a++)this.node.removeEventListener(this.domEvents[a],this.change.bind(this))},c}(a.Binding);a.EventBinding=e;var f=function(b){function c(c){b.call(this),this.node=c,this.dependencies=[],this.updateDependenciesOnChange=!1,this.expression=new a.Expression(c,c.nodeValue,this.scope),this.updateDependencies(),this.run()}return __extends(c,b),Object.defineProperty(c.prototype,"scope",{get:function(){return this.node.__scope__},enumerable:!0,configurable:!0}),c.prototype.dependencyChange=function(){this.updateDependenciesOnChange&&this.updateDependencies(),this.run()},c.prototype.run=function(){this.expression.run(),this.node.nodeValue=this.expression.value,0!=this.dependencies.length||this.expression.success||(this.dependencies.push(this.scope),this.bindDependencies(),this.updateDependenciesOnChange=!0)},c.prototype.unbind=function(){this.unbindDependencies()},c.prototype.getDependencies=function(a){return void 0===a&&(a=!1),(a||void 0==this.dependencies)&&(this.dependencies=this.expression.getDependencies().requires),this.dependencies},c.prototype.updateDependencies=function(){this.unbindDependencies(),this.getDependencies(!0),this.bindDependencies()},c.prototype.bindDependencies=function(){for(var a=0;a<this.dependencies.length;a++)this.dependencies[a].on("change",this.dependencyChange.bind(this))},c.prototype.unbindDependencies=function(){for(var a=0;a<this.dependencies.length;a++)this.dependencies[a].off("change",this.dependencyChange.bind(this))},c}(a.Binding);a.InlineBinding=f}(bindings||(bindings={}));var bindingTypes;!function(a){function b(a){var b;for(var c in this)if(this[c].id==a)return this[c];return b}function c(a,b,c){a instanceof Array||(a=[a]);var d,e=a[0];a.splice(0,1);var f=a.join("-");for(var g in this)if(this[g].id==e){d=new this[g](b,c,f);break}return d}a.getBinding=b,a.createBinding=c}(bindingTypes||(bindingTypes={}));var bindings;!function(bindings){var Expression=function(){function Expression(a,b,c){this.node=a,this.expression=b,this.scope=c,this.success=!0,this.value=void 0,this.dependencies=[]}return Expression.prototype.run=function(){var data={value:void 0,success:!0,error:void 0},variables={$node:this.node},funcString='new Function("variables","addedScope","',args=[],context=this.buildContext(this.scope).context;args.push(variables),args.push(this.node.__addedScope__||{}),funcString+="with(this){",funcString+="with(variables){",funcString+="with(addedScope){",funcString+="return ",funcString+=this.expression,funcString+="}",funcString+="}",funcString+="}",funcString+='")';var func=eval(funcString);try{data.value=func.apply(context,args)}catch(e){data.success=!1,data.error=e}return this.value=data.value,this.success=data.success,data},Expression.prototype.runOnScope=function(){var a={value:void 0,success:!1},b=this.getDependencies();return a.value=b.gets[b.gets.length-1],a.success=!!a.value,a},Expression.prototype.getDependencies=function(){var data={success:!0,error:void 0,requires:[],gets:[],sets:[]},hidden={console:{},window:{},navigator:{},localStorage:{},location:{},alert:bindings.noop,eval:bindings.noop},variables={$node:this.node},funcString='new Function("hidden","variables","addedScope",',args=[];args.push(hidden),args.push(variables),args.push(this.node.__addedScope__||{});var context=this.buildContext(this.scope,data,!0);funcString+='"',funcString+="with(this){",funcString+="with(hidden){",funcString+="with(variables){",funcString+="with(addedScope){",funcString+="return ",funcString+=this.expression,funcString+="}",funcString+="}",funcString+="}",funcString+="}",funcString+='")';var func=eval(funcString);try{func.apply(context.context,args)}catch(e){data.success=!1,data.error=e}return this.dependencies=data.requires,data},Expression.prototype.buildContext=function(a,b,c){void 0===b&&(b={requires:[],gets:[],sets:[]}),void 0===c&&(c=!1);var d=a.object instanceof Array?[]:{},e=function(a,b,d,e){return-1==e.gets.indexOf(a.values[d])&&(e.requires.push(a.values[d]),e.gets.push(a.values[d])),a.values[d]instanceof bindings.Scope?this.buildContext(a.values[d],e,c).context:a.values[d]instanceof bindings.Value&&!(a.values[d].value instanceof Function&&c)?a.values[d].value:void 0},f=function(a,b,d,e,f){e.requires.push(a.values[d]),e.sets.push(a.values[d]),c||(a.object[d]=f)};for(var g in a.values)d.__defineGetter__(g,e.bind(this,a,d,g,b)),d.__defineSetter__(g,f.bind(this,a,d,g,b));return a.parent?d.__defineGetter__("$parent",function(a,b,c,d){return a.parent?(-1==c.gets.indexOf(a.parent)&&(c.requires.push(a.parent),c.gets.push(a.parent)),this.buildContext(a.parent,c,d).context):void 0}.bind(this,a,d,b,c)):d.$parent=void 0,a.modal?d.__defineGetter__("$modal",function(a,b,c,d){return a.modal?(-1==c.gets.indexOf(a.modal.scope)&&(c.requires.push(a.modal.scope),c.gets.push(a.modal.scope)),this.buildContext(a.modal.scope,c,d).context):void 0}.bind(this,a,d,b,c)):d.$modal=void 0,{context:d,requires:b}},Expression}();bindings.Expression=Expression}(bindings||(bindings={}));var bindingTypes;!function(a){var b=function(a){function b(b,c){a.call(this,b,c),this.domEvents=["click"],this.updateEvents()}return __extends(b,a),b.id="click",b}(bindings.EventBinding);a.ClickBinding=b}(bindingTypes||(bindingTypes={}));var bindingTypes;!function(a){var b=function(a){function b(b,c){a.call(this,b,c),this.run()}return __extends(b,a),b.prototype.run=function(){a.prototype.run.call(this),this.expression.value?this.node.removeAttribute("disabled"):this.node.setAttribute("disabled","disabled")},b.id="enabled",b}(bindings.OneWayBinding);a.EnabledBinding=b}(bindingTypes||(bindingTypes={}));var bindingTypes;!function(a){var b=function(a){function b(b,c){a.call(this,b,c),this.run()}return __extends(b,a),b.prototype.run=function(){a.prototype.run.call(this),this.expression.value?this.node.setAttribute("disabled","disabled"):this.node.removeAttribute("disabled")},b.id="disabled",b}(bindings.OneWayBinding);a.DisabledBinding=b}(bindingTypes||(bindingTypes={}));var bindingTypes;!function(a){var b=function(a){function b(b,c){a.call(this,b,c),this.children=[];for(var d=0;d<this.node.childNodes.length;d++)this.children.push(this.node.childNodes[d]);this.removeAllChildren(),this.run()}return __extends(b,a),b.prototype.restoreChildren=function(){for(var a in this.children)this.node.appendChild(this.children[a])},b.prototype.removeAllChildren=function(){for(;0!==this.node.childNodes.length;)this.node.removeChild(this.node.childNodes[0])},b.prototype.run=function(){var a=this.expression.runOnScope().value;if(this.removeAllChildren(),!(a instanceof bindings.Scope))throw new Error("bind-foreach requires a Object or Array");for(var b=0;b<a.values.length;b++)for(var c=0;c<this.children.length;c++){var d=this.children[c].cloneNode(!0);d.__scope__=a.values[b],d.__addedScope__=bindings.extend(d.__addedScope__,{$index:b,$isFirst:0==b,$isLast:b==a.values.length-1}),this.node.appendChild(d)}},b.prototype.unbind=function(){this.removeAllChildren(),a.prototype.unbind.call(this),this.restoreChildren()},b.id="foreach",b.priority=3,b}(bindings.OneWayBinding);a.ForEachBinding=b}(bindingTypes||(bindingTypes={}));var bindingTypes;!function(a){var b=function(a){function b(b,c){a.call(this,b,c),this.children=[];for(var d=0;d<this.node.children.length;d++)this.children.push(this.node.children[d]);this.run()}return __extends(b,a),b.prototype.restoreChildren=function(){for(var a in this.children)this.node.appendChild(this.children[a])},b.prototype.removeChildren=function(){for(;0!==this.node.children.length;)this.node.removeChild(this.node.children[0])},b.prototype.run=function(){a.prototype.run.call(this),this.expression.value?this.restoreChildren():this.removeChildren()},b.prototype.unbind=function(){a.prototype.unbind.call(this),this.removeChildren(),this.restoreChildren()},b.id="if",b}(bindings.OneWayBinding);a.IfBinding=b}(bindingTypes||(bindingTypes={}));var bindingTypes;!function(a){var b=function(a){function b(b,c){a.call(this,b,c),this.children=[];for(var d=0;d<this.node.children.length;d++)this.children.push(this.node.children[d]);this.run()}return __extends(b,a),b.prototype.restoreChildren=function(){for(var a in this.children)this.node.appendChild(this.children[a])},b.prototype.removeChildren=function(){for(;0!==this.node.children.length;)this.node.removeChild(this.node.children[0])},b.prototype.run=function(){a.prototype.run.call(this),this.expression.value?this.removeChildren():this.restoreChildren()},b.prototype.unbind=function(){a.prototype.unbind.call(this),this.removeChildren(),this.restoreChildren()},b.id="ifnot",b}(bindings.OneWayBinding);a.IfNotBinding=b}(bindingTypes||(bindingTypes={}));var bindingTypes;!function(a){var b=function(a){function b(b,c){a.call(this,b,c),this.children=[];for(var d=0;d<this.node.childNodes.length;d++)this.children.push(this.node.childNodes[d]);this.removeChildren(),this.run()}return __extends(b,a),b.prototype.restoreChildren=function(){for(var a in this.children)this.node.appendChild(this.children[a])},b.prototype.removeChildren=function(){for(;0!==this.node.childNodes.length;)this.node.removeChild(this.node.childNodes[0])},b.prototype.run=function(){a.prototype.run.call(this),this.removeChildren();for(var b=this.expression.value,c=0;b>c;c++)for(var d=0;d<this.children.length;d++){var e=this.children[d].cloneNode(!0);e.__addedScope__=bindings.extend(e.__addedScope__,{$index:c,$isFirst:0==c,$isLast:c==b-1}),this.node.appendChild(e)}},b.prototype.unbind=function(){this.removeChildren(),a.prototype.unbind.call(this),this.restoreChildren()},b.id="repeat",b.priority=1,b}(bindings.OneWayBinding);a.RepeatBinding=b}(bindingTypes||(bindingTypes={}));var bindingTypes;!function(a){var b=function(a){function b(b,c){a.call(this,b,c),this.domEvents=["submit"],this.updateEvents()}return __extends(b,a),b.prototype.change=function(b){a.prototype.change.call(this,b),b.preventDefault()},b.id="submit",b}(bindings.EventBinding);a.SubmitBinding=b}(bindingTypes||(bindingTypes={}));var bindingTypes;!function(a){var b=function(a){function b(b,c){a.call(this,b,c),this.oldText=this.node.textContent,this.run()}return __extends(b,a),b.prototype.run=function(){a.prototype.run.call(this),this.node.innerText=this.expression.value},b.prototype.unbind=function(){a.prototype.unbind.call(this),this.node.textContent=this.oldText},b.id="text",b}(bindings.OneWayBinding);a.TextBinding=b}(bindingTypes||(bindingTypes={}));var bindingTypes;!function(a){var b=function(a){function b(b,c){a.call(this,b,c),this.node=b,this.domEvents=["change"],this.updateEvents()}return __extends(b,a),b.prototype.run=function(){a.prototype.run.call(this),this.node.value=this.expression.value},b.prototype.change=function(b){a.prototype.change.call(this,b);var c=this.expression.runOnScope().value;c instanceof bindings.Value&&c.updateValue(this.node.value)},b.id="value",b}(bindings.TwoWayBinding);a.ValueBinding=b}(bindingTypes||(bindingTypes={}));var bindingTypes;!function(a){var b=function(a){function b(b,c){a.call(this,b,c),this.run()}return __extends(b,a),b.prototype.run=function(){var a=this.expression.runOnScope().value;if(!(a instanceof bindings.Scope))throw new Error("bind-with requires a Object or Array");for(var b=0;b<this.node.childNodes.length;b++){var c=this.node.childNodes[b];c.__scope__=a}},b.id="with",b.priority=1,b}(bindings.OneWayBinding);a.WithBinding=b}(bindingTypes||(bindingTypes={}));var bindingTypes;!function(a){var b=function(a){function b(b,c){a.call(this,b,c),this.oldText=this.node.textContent,this.run()}return __extends(b,a),b.prototype.run=function(){a.prototype.run.call(this),this.node.innerHTML=this.expression.value},b.prototype.unbind=function(){a.prototype.unbind.call(this),this.node.textContent=this.oldText},b.id="html",b}(bindings.OneWayBinding);a.HTMLBinding=b}(bindingTypes||(bindingTypes={}));var bindingTypes;!function(a){var b=function(a){function b(b,c){a.call(this,b,c),this.run()}return __extends(b,a),b.prototype.run=function(){a.prototype.run.call(this),this.node.style.display=this.expression.value?"":"none"},b.id="visible",b}(bindings.OneWayBinding);a.VisibleBinding=b}(bindingTypes||(bindingTypes={}));var bindingTypes;!function(a){var b=function(a){function b(b,c){a.call(this,b,c),this.run()}return __extends(b,a),b.prototype.run=function(){a.prototype.run.call(this),this.node.setAttribute("href",this.expression.value)},b.id="href",b}(bindings.OneWayBinding);a.HrefBinding=b}(bindingTypes||(bindingTypes={}));var bindingTypes;!function(a){var b=function(a){function b(b,c){a.call(this,b,c),this.run()}return __extends(b,a),b.prototype.run=function(){a.prototype.run.call(this),this.node.setAttribute("src",this.expression.value)},b.id="src",b}(bindings.OneWayBinding);a.SrcBinding=b}(bindingTypes||(bindingTypes={}));var bindingTypes;!function(a){var b=function(a){function b(b,c){a.call(this,b,c),this.node=b,this.domEvents=["input"],this.updateEvents()}return __extends(b,a),b.prototype.run=function(){a.prototype.run.call(this),this.node.value=this.expression.value},b.prototype.change=function(b){a.prototype.change.call(this,b);var c=this.expression.runOnScope().value;c instanceof bindings.Value&&c.updateValue(this.node.value)},b.id="input",b}(bindings.TwoWayBinding);a.InputBinding=b}(bindingTypes||(bindingTypes={}));var bindingTypes;!function(a){var b=function(a){function b(b,c,d){a.call(this,b,c),this.attr=d,this.run()}return __extends(b,a),b.prototype.run=function(){a.prototype.run.call(this),this.node.setAttribute(this.attr,this.expression.value)},b.id="attr",b}(bindings.OneWayBinding);a.AttrBinding=b}(bindingTypes||(bindingTypes={}));var bindingTypes;!function(a){var b=function(a){function b(b,c,d){a.call(this,b,c),this.bindClass=d,this.run()}return __extends(b,a),b.prototype.run=function(){a.prototype.run.call(this),this.expression.value&&!this.hasClass()?this.addClass():this.hasClass()&&this.removeClass()},b.prototype.addClass=function(){this.node.className+=" "+this.bindClass,this.node.className=this.node.className.trim()},b.prototype.removeClass=function(){this.node.className=this.node.className.replace(new RegExp("(?:^|s)"+this.bindClass+"(?!S)","g"),""),this.node.className=this.node.className.trim()},b.prototype.hasClass=function(){return-1!==this.node.className.indexOf(this.bindClass)},b.id="class",b}(bindings.OneWayBinding);a.ClassBinding=b}(bindingTypes||(bindingTypes={}));var bindingTypes;!function(a){var b=function(a){function b(b,c,d){a.call(this,b,c),this.style=d,this.run()}return __extends(b,a),b.prototype.run=function(){a.prototype.run.call(this),this.node.style[this.style]=this.expression.value},b.id="style",b}(bindings.OneWayBinding);a.StyleBinding=b}(bindingTypes||(bindingTypes={}));var bindings;!function(a){function b(b,c){void 0===b&&(b={}),void 0===c&&(c={});var d=new a.Modal(b,c);return b._bindings=d,d}function c(b,c){void 0===b&&(b={}),void 0===c&&(c=document),b instanceof a.Modal?b.applyBindings(c):b._bindings instanceof a.Modal&&b._bindings.applyBindings(c)}function d(a,b){if(void 0===b&&(b=20),a instanceof Object&&null!==a){if(b>0)if(a.hasOwnProperty("length"))for(var c=new Array(0),d=0;d<a.length;d++)c[d]="object"!=typeof a[d]?a[d]:this.duplicateObject(a[d],b-1);else{var c;for(var e in a)c[e]=a[e]instanceof Object?this.duplicateObject(a[e],b-1):a[e]}return c}return a}function e(){}function f(a){return"object"==typeof a?JSON.parse(JSON.stringify(a)):void 0}function g(a,b){a=a||{},b=b||{};for(var c in b)a[c]=b[c];return a}function h(a,b,c,d){void 0===a&&(a={}),void 0===b&&(b={}),void 0===c&&(c={}),void 0===d&&(d={});var e={};for(var f in arguments)this.extend(e,arguments[f]);return e}a.createModal=b,a.applyBindings=c,a.duplicateObject=d,a.noop=e,a.clone=f,a.extend=g,a.extendNew=h}(bindings||(bindings={}));